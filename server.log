[2025-11-29 06:01:03,160] INFO in logger: 日志系统初始化完成
[2025-11-29 06:01:03] INFO in logger: 日志系统初始化完成
[2025-11-29 06:01:03,167] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:01:03] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:01:03,311] INFO in app: 所有蓝图已注册
[2025-11-29 06:01:03] INFO in app: 所有蓝图已注册
2025-11-29 06:01:03,312 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:01:03,312 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2025-11-29 06:01:03,312 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,313 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("oauth_accounts")
2025-11-29 06:01:03,313 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,313 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_groups")
2025-11-29 06:01:03,313 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,314 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("project_groups")
2025-11-29 06:01:03,314 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,314 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("group_messages")
2025-11-29 06:01:03,314 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,314 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("message_read_status")
2025-11-29 06:01:03,314 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,314 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-11-29 06:01:03,314 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,315 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_files")
2025-11-29 06:01:03,315 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,315 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("shared_files")
2025-11-29 06:01:03,315 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,315 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("calendar_events")
2025-11-29 06:01:03,315 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,315 INFO sqlalchemy.engine.Engine COMMIT
[2025-11-29 06:01:03,315] INFO in app: 数据库表检查完成
[2025-11-29 06:01:03] INFO in app: 数据库表检查完成
[2025-11-29 06:01:03,316] INFO in app: 应用初始化完成
[2025-11-29 06:01:03] INFO in app: 应用初始化完成
 * Restarting with stat
[2025-11-29 06:01:03,702] INFO in logger: 日志系统初始化完成
[2025-11-29 06:01:03] INFO in logger: 日志系统初始化完成
[2025-11-29 06:01:03,709] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:01:03] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:01:03,847] INFO in app: 所有蓝图已注册
[2025-11-29 06:01:03] INFO in app: 所有蓝图已注册
2025-11-29 06:01:03,848 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:01:03,848 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2025-11-29 06:01:03,848 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("oauth_accounts")
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_groups")
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("project_groups")
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("group_messages")
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("message_read_status")
2025-11-29 06:01:03,849 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,850 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-11-29 06:01:03,850 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,850 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_files")
2025-11-29 06:01:03,850 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,850 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("shared_files")
2025-11-29 06:01:03,850 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,850 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("calendar_events")
2025-11-29 06:01:03,850 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:01:03,850 INFO sqlalchemy.engine.Engine COMMIT
[2025-11-29 06:01:03,851] INFO in app: 数据库表检查完成
[2025-11-29 06:01:03] INFO in app: 数据库表检查完成
[2025-11-29 06:01:03,851] INFO in app: 应用初始化完成
[2025-11-29 06:01:03] INFO in app: 应用初始化完成
 * Debugger is active!
 * Debugger PIN: 199-467-290
(150113) wsgi starting up on http://0.0.0.0:5000
(150113) accepted ('127.0.0.1', 35302)
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET / HTTP/1.1" 200 1026 0.001243
(150113) accepted ('127.0.0.1', 35308)
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET / HTTP/1.1" 200 1026 0.001131
(150113) accepted ('127.0.0.1', 35320)
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET / HTTP/1.1" 200 1026 0.000858
(150113) accepted ('127.0.0.1', 35336)
ToDoList服务器启动中...
监听地址: http://0.0.0.0:5000
可用接口:
- GET / - 服务信息
- GET /health - 健康检查
- POST /auth/register - 用户注册
- POST /auth/login - 用户登录
- POST /auth/logout - 用户登出
- GET /auth/status - 认证服务状态
- POST /groups/create - 创建项目组
- POST /groups/join - 加入项目组
- POST /groups/join-by-code - 通过邀请码加入项目组
- GET /groups/list/<user_id> - 获取用户项目组列表
- GET /groups/info/<group_id> - 获取项目组信息
- PUT /groups/update/<group_id> - 更新项目组信息
- DELETE /groups/delete/<group_id> - 删除项目组
- GET /chat/rooms - 获取聊天室列表
- GET /chat/rooms/<room_id>/messages - 获取聊天消息
- POST /chat/rooms/<room_id>/messages - 发送聊天消息
- WebSocket: subscribe/unsubscribe - 实时聊天功能
2025-11-29 06:02:04,486 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,486 INFO sqlalchemy.engine.Engine SELECT 1
2025-11-29 06:02:04,487 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ()
2025-11-29 06:02:04,487 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /health HTTP/1.1" 200 344 0.002097
(150113) accepted ('127.0.0.1', 35344)
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /auth/status HTTP/1.1" 200 293 0.000802
(150113) accepted ('127.0.0.1', 35358)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /auth/register HTTP/1.1" 400 265 0.000909
(150113) accepted ('127.0.0.1', 35364)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /auth/login HTTP/1.1" 400 265 0.000875
(150113) accepted ('127.0.0.1', 35368)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /auth/logout HTTP/1.1" 400 265 0.000903
(150113) accepted ('127.0.0.1', 35382)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /auth/google/login HTTP/1.1" 400 265 0.000973
(150113) accepted ('127.0.0.1', 35392)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /auth/google/callback HTTP/1.1" 400 265 0.000839
(150113) accepted ('127.0.0.1', 35408)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /auth/github/login HTTP/1.1" 400 265 0.000845
(150113) accepted ('127.0.0.1', 35414)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /auth/github/callback HTTP/1.1" 400 265 0.000796
(150113) accepted ('127.0.0.1', 35424)
2025-11-29 06:02:04,581 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,584 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,584 INFO sqlalchemy.engine.Engine [generated in 0.00026s] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,585 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /user/profile HTTP/1.1" 401 239 0.018320
(150113) accepted ('127.0.0.1', 35436)
2025-11-29 06:02:04,595 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,595 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,595 INFO sqlalchemy.engine.Engine [cached since 0.01155s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,596 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "PUT /user/profile HTTP/1.1" 401 239 0.002414
(150113) accepted ('127.0.0.1', 35442)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /groups/create HTTP/1.1" 400 265 0.000829
(150113) accepted ('127.0.0.1', 35458)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /groups/join HTTP/1.1" 400 265 0.000824
(150113) accepted ('127.0.0.1', 35464)
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /groups/join-by-code HTTP/1.1" 400 265 0.000796
(150113) accepted ('127.0.0.1', 35480)
2025-11-29 06:02:04,633 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,634 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,634 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('1', 1, 0)
2025-11-29 06:02:04,634 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /groups/list/1 HTTP/1.1" 404 262 0.002873
(150113) accepted ('127.0.0.1', 35492)
2025-11-29 06:02:04,644 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,646 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,646 INFO sqlalchemy.engine.Engine [generated in 0.00023s] ('1', 1, 0)
2025-11-29 06:02:04,647 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /groups/info/1 HTTP/1.1" 404 263 0.004186
(150113) accepted ('127.0.0.1', 35502)
127.0.0.1 - - [29/Nov/2025 06:02:04] "PUT /groups/update/1 HTTP/1.1" 400 265 0.000845
(150113) accepted ('127.0.0.1', 35512)
2025-11-29 06:02:04,667 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,667 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,667 INFO sqlalchemy.engine.Engine [cached since 0.02191s ago] ('1', 1, 0)
2025-11-29 06:02:04,668 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "DELETE /groups/delete/1 HTTP/1.1" 404 263 0.002081
(150113) accepted ('127.0.0.1', 35514)
2025-11-29 06:02:04,677 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,677 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,677 INFO sqlalchemy.engine.Engine [cached since 0.09383s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,678 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /groups/1/members HTTP/1.1" 401 239 0.002233
(150113) accepted ('127.0.0.1', 35522)
2025-11-29 06:02:04,688 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,688 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,689 INFO sqlalchemy.engine.Engine [cached since 0.105s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,689 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /groups/1/overview HTTP/1.1" 401 239 0.002263
(150113) accepted ('127.0.0.1', 35532)
2025-11-29 06:02:04,699 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,699 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,699 INFO sqlalchemy.engine.Engine [cached since 0.1157s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,700 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /tasks HTTP/1.1" 401 239 0.002156
(150113) accepted ('127.0.0.1', 35540)
2025-11-29 06:02:04,709 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,709 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,710 INFO sqlalchemy.engine.Engine [cached since 0.126s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,710 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /tasks HTTP/1.1" 401 239 0.002033
(150113) accepted ('127.0.0.1', 35548)
2025-11-29 06:02:04,720 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,721 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,721 INFO sqlalchemy.engine.Engine [cached since 0.1372s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,721 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /tasks/1 HTTP/1.1" 401 239 0.002149
(150113) accepted ('127.0.0.1', 35552)
2025-11-29 06:02:04,731 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,731 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,731 INFO sqlalchemy.engine.Engine [cached since 0.1478s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,732 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "PUT /tasks/1 HTTP/1.1" 401 239 0.002004
(150113) accepted ('127.0.0.1', 35562)
2025-11-29 06:02:04,741 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,742 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,742 INFO sqlalchemy.engine.Engine [cached since 0.158s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,742 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "DELETE /tasks/1 HTTP/1.1" 401 239 0.002018
(150113) accepted ('127.0.0.1', 35568)
2025-11-29 06:02:04,752 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,752 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,752 INFO sqlalchemy.engine.Engine [cached since 0.1685s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,753 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /tasks/tree/1 HTTP/1.1" 401 239 0.002236
(150113) accepted ('127.0.0.1', 35580)
2025-11-29 06:02:04,762 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,763 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,763 INFO sqlalchemy.engine.Engine [cached since 0.179s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,763 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "PUT /tasks/1/move HTTP/1.1" 401 239 0.002335
(150113) accepted ('127.0.0.1', 35596)
2025-11-29 06:02:04,773 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,773 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,773 INFO sqlalchemy.engine.Engine [cached since 0.1898s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,774 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /tasks/1/attachments HTTP/1.1" 401 239 0.002167
(150113) accepted ('127.0.0.1', 35604)
2025-11-29 06:02:04,784 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,784 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,784 INFO sqlalchemy.engine.Engine [cached since 0.2009s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,785 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /tasks/1/attachments HTTP/1.1" 401 239 0.001974
(150113) accepted ('127.0.0.1', 35608)
2025-11-29 06:02:04,794 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,795 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,795 INFO sqlalchemy.engine.Engine [cached since 0.2113s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,795 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "DELETE /tasks/1/attachments/1 HTTP/1.1" 401 239 0.002342
(150113) accepted ('127.0.0.1', 35616)
2025-11-29 06:02:04,805 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,805 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,805 INFO sqlalchemy.engine.Engine [cached since 0.2215s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,806 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /files/upload HTTP/1.1" 401 239 0.002056
(150113) accepted ('127.0.0.1', 35622)
2025-11-29 06:02:04,816 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,816 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,816 INFO sqlalchemy.engine.Engine [cached since 0.2326s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,817 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /files/1 HTTP/1.1" 401 239 0.002117
(150113) accepted ('127.0.0.1', 35634)
2025-11-29 06:02:04,828 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,828 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,828 INFO sqlalchemy.engine.Engine [cached since 0.2446s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,829 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "DELETE /files/1 HTTP/1.1" 401 239 0.002211
(150113) accepted ('127.0.0.1', 35640)
2025-11-29 06:02:04,839 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,839 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,839 INFO sqlalchemy.engine.Engine [cached since 0.2554s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,840 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /files/group/1 HTTP/1.1" 401 239 0.002529
(150113) accepted ('127.0.0.1', 35646)
2025-11-29 06:02:04,850 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,850 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,850 INFO sqlalchemy.engine.Engine [cached since 0.2665s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,851 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /files/1/preview HTTP/1.1" 401 239 0.002344
(150113) accepted ('127.0.0.1', 35650)
2025-11-29 06:02:04,861 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,861 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,861 INFO sqlalchemy.engine.Engine [cached since 0.2775s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,862 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /chat/rooms HTTP/1.1" 401 239 0.002124
(150113) accepted ('127.0.0.1', 35664)
2025-11-29 06:02:04,872 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,872 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,872 INFO sqlalchemy.engine.Engine [cached since 0.2884s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,873 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /chat/rooms/1/messages HTTP/1.1" 401 239 0.002148
(150113) accepted ('127.0.0.1', 35678)
2025-11-29 06:02:04,882 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,882 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,882 INFO sqlalchemy.engine.Engine [cached since 0.2987s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,883 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /chat/rooms/1/messages HTTP/1.1" 401 239 0.002159
(150113) accepted ('127.0.0.1', 35692)
2025-11-29 06:02:04,892 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,893 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,893 INFO sqlalchemy.engine.Engine [cached since 0.309s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,893 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /calendar/events HTTP/1.1" 401 239 0.002043
(150113) accepted ('127.0.0.1', 35696)
2025-11-29 06:02:04,902 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,903 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,903 INFO sqlalchemy.engine.Engine [cached since 0.3192s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,903 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /calendar/events HTTP/1.1" 401 239 0.002031
(150113) accepted ('127.0.0.1', 35710)
2025-11-29 06:02:04,913 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,913 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,913 INFO sqlalchemy.engine.Engine [cached since 0.3298s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,914 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /calendar/events/1 HTTP/1.1" 401 239 0.002654
(150113) accepted ('127.0.0.1', 35714)
2025-11-29 06:02:04,924 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,924 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,924 INFO sqlalchemy.engine.Engine [cached since 0.3408s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,925 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "PUT /calendar/events/1 HTTP/1.1" 401 239 0.002035
(150113) accepted ('127.0.0.1', 35718)
2025-11-29 06:02:04,934 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,935 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,935 INFO sqlalchemy.engine.Engine [cached since 0.3511s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,935 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "DELETE /calendar/events/1 HTTP/1.1" 401 239 0.002050
(150113) accepted ('127.0.0.1', 35732)
2025-11-29 06:02:04,945 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,945 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,945 INFO sqlalchemy.engine.Engine [cached since 0.3616s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,946 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "POST /calendar/from-task/1 HTTP/1.1" 401 239 0.002018
(150113) accepted ('127.0.0.1', 35746)
2025-11-29 06:02:04,955 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,955 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,955 INFO sqlalchemy.engine.Engine [cached since 0.3719s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,956 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /widget/today-tasks HTTP/1.1" 401 239 0.001990
(150113) accepted ('127.0.0.1', 35754)
2025-11-29 06:02:04,965 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:04,965 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:04,966 INFO sqlalchemy.engine.Engine [cached since 0.3819s ago] ('test-token', 'test-token', 'test-token', 1, 0)
2025-11-29 06:02:04,966 INFO sqlalchemy.engine.Engine ROLLBACK
127.0.0.1 - - [29/Nov/2025 06:02:04] "GET /widget/today-events HTTP/1.1" 401 239 0.002018
(150113) accepted ('211.71.92.185', 29736)
2025-11-29 06:02:57,547 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:02:57,548 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:57,548 INFO sqlalchemy.engine.Engine [cached since 52.96s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:02:57,548 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:02:57,548 INFO sqlalchemy.engine.Engine [cached since 52.9s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:02:57,550 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:02:57,550 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('2911c6f5155f488d',)
2025-11-29 06:02:57,552 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0 ORDER BY group_messages.sent_at DESC
 LIMIT ? OFFSET ?
2025-11-29 06:02:57,552 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('2911c6f5155f488d', 20, 0)
2025-11-29 06:02:57,556 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0) AS anon_1
2025-11-29 06:02:57,556 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('2911c6f5155f488d',)
2025-11-29 06:02:57,558 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:02:57] "GET /chat/rooms/2911c6f5155f488d/messages?page=1&pageSize=50 HTTP/1.1" 200 4662 0.011652
 * Detected change in '/root/ToDoListServer/app.py', reloading
 * Restarting with stat
[2025-11-29 06:06:06,013] INFO in logger: 日志系统初始化完成
[2025-11-29 06:06:06] INFO in logger: 日志系统初始化完成
[2025-11-29 06:06:06,020] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:06:06] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:06:06,159] INFO in app: 所有蓝图已注册
[2025-11-29 06:06:06] INFO in app: 所有蓝图已注册
2025-11-29 06:06:06,160 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:06:06,160 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2025-11-29 06:06:06,161 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,161 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("oauth_accounts")
2025-11-29 06:06:06,161 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,161 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_groups")
2025-11-29 06:06:06,161 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,162 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("project_groups")
2025-11-29 06:06:06,162 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,162 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("group_messages")
2025-11-29 06:06:06,162 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,162 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("message_read_status")
2025-11-29 06:06:06,162 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,162 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-11-29 06:06:06,162 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,163 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_files")
2025-11-29 06:06:06,163 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,163 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("shared_files")
2025-11-29 06:06:06,163 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,163 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("calendar_events")
2025-11-29 06:06:06,163 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:06,164 INFO sqlalchemy.engine.Engine COMMIT
[2025-11-29 06:06:06,164] INFO in app: 数据库表检查完成
[2025-11-29 06:06:06] INFO in app: 数据库表检查完成
[2025-11-29 06:06:06,164] INFO in app: 应用初始化完成
[2025-11-29 06:06:06] INFO in app: 应用初始化完成
 * Debugger is active!
 * Debugger PIN: 199-467-290
(154254) wsgi starting up on http://0.0.0.0:5000
 * Detected change in '/root/ToDoListServer/app.py', reloading
ToDoList服务器启动中...
监听地址: http://0.0.0.0:5000
可用接口:
- GET / - 服务信息
- GET /health - 健康检查
- POST /auth/register - 用户注册
- POST /auth/login - 用户登录
- POST /auth/logout - 用户登出
- GET /auth/status - 认证服务状态
- POST /groups/create - 创建项目组
- POST /groups/join - 加入项目组
- POST /groups/join-by-code - 通过邀请码加入项目组
- GET /groups/list/<user_id> - 获取用户项目组列表
- GET /groups/info/<group_id> - 获取项目组信息
- PUT /groups/update/<group_id> - 更新项目组信息
- DELETE /groups/delete/<group_id> - 删除项目组
- GET /chat/rooms - 获取聊天室列表
- GET /chat/rooms/<room_id>/messages - 获取聊天消息
- POST /chat/rooms/<room_id>/messages - 发送聊天消息
- WebSocket: subscribe/unsubscribe - 实时聊天功能
 * Restarting with stat
[2025-11-29 06:06:09,757] INFO in logger: 日志系统初始化完成
[2025-11-29 06:06:09] INFO in logger: 日志系统初始化完成
[2025-11-29 06:06:09,765] INFO in app: 数据库迁移系统已启用
[2025-11-29 06:06:09] INFO in app: 数据库迁移系统已启用
[2025-11-29 06:06:09,766] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:06:09] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:06:09,906] INFO in app: 所有蓝图已注册
[2025-11-29 06:06:09] INFO in app: 所有蓝图已注册
2025-11-29 06:06:09,908 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:06:09,908 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2025-11-29 06:06:09,908 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,909 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("oauth_accounts")
2025-11-29 06:06:09,909 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,909 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_groups")
2025-11-29 06:06:09,909 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,909 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("project_groups")
2025-11-29 06:06:09,909 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,910 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("group_messages")
2025-11-29 06:06:09,910 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,910 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("message_read_status")
2025-11-29 06:06:09,910 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,910 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-11-29 06:06:09,910 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,910 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_files")
2025-11-29 06:06:09,910 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,911 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("shared_files")
2025-11-29 06:06:09,911 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,911 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("calendar_events")
2025-11-29 06:06:09,911 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:09,911 INFO sqlalchemy.engine.Engine COMMIT
[2025-11-29 06:06:09,911] INFO in app: 数据库表检查完成
[2025-11-29 06:06:09] INFO in app: 数据库表检查完成
[2025-11-29 06:06:09,911] INFO in app: 应用初始化完成
[2025-11-29 06:06:09] INFO in app: 应用初始化完成
 * Debugger is active!
 * Debugger PIN: 199-467-290
(154277) wsgi starting up on http://0.0.0.0:5000
 * Detected change in '/root/ToDoListServer/manage.py', reloading
ToDoList服务器启动中...
监听地址: http://0.0.0.0:5000
可用接口:
- GET / - 服务信息
- GET /health - 健康检查
- POST /auth/register - 用户注册
- POST /auth/login - 用户登录
- POST /auth/logout - 用户登出
- GET /auth/status - 认证服务状态
- POST /groups/create - 创建项目组
- POST /groups/join - 加入项目组
- POST /groups/join-by-code - 通过邀请码加入项目组
- GET /groups/list/<user_id> - 获取用户项目组列表
- GET /groups/info/<group_id> - 获取项目组信息
- PUT /groups/update/<group_id> - 更新项目组信息
- DELETE /groups/delete/<group_id> - 删除项目组
- GET /chat/rooms - 获取聊天室列表
- GET /chat/rooms/<room_id>/messages - 获取聊天消息
- POST /chat/rooms/<room_id>/messages - 发送聊天消息
- WebSocket: subscribe/unsubscribe - 实时聊天功能
 * Restarting with stat
[2025-11-29 06:06:14,502] INFO in logger: 日志系统初始化完成
[2025-11-29 06:06:14] INFO in logger: 日志系统初始化完成
[2025-11-29 06:06:14,511] INFO in app: 数据库迁移系统已启用
[2025-11-29 06:06:14] INFO in app: 数据库迁移系统已启用
[2025-11-29 06:06:14,511] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:06:14] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:06:14,649] INFO in app: 所有蓝图已注册
[2025-11-29 06:06:14] INFO in app: 所有蓝图已注册
2025-11-29 06:06:14,651 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:06:14,651 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2025-11-29 06:06:14,651 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,652 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("oauth_accounts")
2025-11-29 06:06:14,652 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,652 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_groups")
2025-11-29 06:06:14,652 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,652 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("project_groups")
2025-11-29 06:06:14,652 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,653 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("group_messages")
2025-11-29 06:06:14,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,653 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("message_read_status")
2025-11-29 06:06:14,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,653 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-11-29 06:06:14,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,653 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_files")
2025-11-29 06:06:14,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,654 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("shared_files")
2025-11-29 06:06:14,654 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,654 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("calendar_events")
2025-11-29 06:06:14,654 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:06:14,654 INFO sqlalchemy.engine.Engine COMMIT
[2025-11-29 06:06:14,654] INFO in app: 数据库表检查完成
[2025-11-29 06:06:14] INFO in app: 数据库表检查完成
[2025-11-29 06:06:14,655] INFO in app: 应用初始化完成
[2025-11-29 06:06:14] INFO in app: 应用初始化完成
 * Debugger is active!
 * Debugger PIN: 199-467-290
(154312) wsgi starting up on http://0.0.0.0:5000
(154312) accepted ('79.124.59.86', 63989)
79.124.59.86 - - [29/Nov/2025 06:06:45] code 400, message Bad HTTP/0.9 request type ('\\x03\\x00\\x00/*à\\x00\\x00\\x00\\x00\\x00Cookie:')
79.124.59.86 - - [29/Nov/2025 06:06:45] "\x03\x00\x00/*à\x00\x00\x00\x00\x00Cookie: mstshash=Administr" 400 -
 * Detected change in '/root/ToDoListServer/setup_migration.py', reloading
ToDoList服务器启动中...
监听地址: http://0.0.0.0:5000
可用接口:
- GET / - 服务信息
- GET /health - 健康检查
- POST /auth/register - 用户注册
- POST /auth/login - 用户登录
- POST /auth/logout - 用户登出
- GET /auth/status - 认证服务状态
- POST /groups/create - 创建项目组
- POST /groups/join - 加入项目组
- POST /groups/join-by-code - 通过邀请码加入项目组
- GET /groups/list/<user_id> - 获取用户项目组列表
- GET /groups/info/<group_id> - 获取项目组信息
- PUT /groups/update/<group_id> - 更新项目组信息
- DELETE /groups/delete/<group_id> - 删除项目组
- GET /chat/rooms - 获取聊天室列表
- GET /chat/rooms/<room_id>/messages - 获取聊天消息
- POST /chat/rooms/<room_id>/messages - 发送聊天消息
- WebSocket: subscribe/unsubscribe - 实时聊天功能
 * Restarting with stat
[2025-11-29 06:08:53,553] INFO in logger: 日志系统初始化完成
[2025-11-29 06:08:53] INFO in logger: 日志系统初始化完成
[2025-11-29 06:08:53,561] INFO in app: 数据库迁移系统已启用
[2025-11-29 06:08:53] INFO in app: 数据库迁移系统已启用
[2025-11-29 06:08:53,562] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:08:53] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:08:53,703] INFO in app: 所有蓝图已注册
[2025-11-29 06:08:53] INFO in app: 所有蓝图已注册
2025-11-29 06:08:53,705 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:08:53,705 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2025-11-29 06:08:53,705 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,706 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("oauth_accounts")
2025-11-29 06:08:53,706 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,706 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_groups")
2025-11-29 06:08:53,706 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,706 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("project_groups")
2025-11-29 06:08:53,706 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,706 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("group_messages")
2025-11-29 06:08:53,706 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,707 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("message_read_status")
2025-11-29 06:08:53,707 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,708 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-11-29 06:08:53,708 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,708 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_files")
2025-11-29 06:08:53,708 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,708 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("shared_files")
2025-11-29 06:08:53,708 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,708 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("calendar_events")
2025-11-29 06:08:53,708 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:08:53,709 INFO sqlalchemy.engine.Engine COMMIT
[2025-11-29 06:08:53,709] INFO in app: 数据库表检查完成
[2025-11-29 06:08:53] INFO in app: 数据库表检查完成
[2025-11-29 06:08:53,709] INFO in app: 应用初始化完成
[2025-11-29 06:08:53] INFO in app: 应用初始化完成
 * Debugger is active!
 * Debugger PIN: 199-467-290
(156760) wsgi starting up on http://0.0.0.0:5000
(156760) accepted ('211.71.92.185', 29861)
ToDoList服务器启动中...
监听地址: http://0.0.0.0:5000
可用接口:
- GET / - 服务信息
- GET /health - 健康检查
- POST /auth/register - 用户注册
- POST /auth/login - 用户登录
- POST /auth/logout - 用户登出
- GET /auth/status - 认证服务状态
- POST /groups/create - 创建项目组
- POST /groups/join - 加入项目组
- POST /groups/join-by-code - 通过邀请码加入项目组
- GET /groups/list/<user_id> - 获取用户项目组列表
- GET /groups/info/<group_id> - 获取项目组信息
- PUT /groups/update/<group_id> - 更新项目组信息
- DELETE /groups/delete/<group_id> - 删除项目组
- GET /chat/rooms - 获取聊天室列表
- GET /chat/rooms/<room_id>/messages - 获取聊天消息
- POST /chat/rooms/<room_id>/messages - 发送聊天消息
- WebSocket: subscribe/unsubscribe - 实时聊天功能
2025-11-29 06:09:01,695 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:09:01,697 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:01,698 INFO sqlalchemy.engine.Engine [generated in 0.00035s] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:09:01,700 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:01,700 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:09:01,702 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:09:01,702 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('2911c6f5155f488d',)
2025-11-29 06:09:01,705 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0 ORDER BY group_messages.sent_at DESC
 LIMIT ? OFFSET ?
2025-11-29 06:09:01,705 INFO sqlalchemy.engine.Engine [generated in 0.00026s] ('2911c6f5155f488d', 20, 0)
2025-11-29 06:09:01,709 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0) AS anon_1
2025-11-29 06:09:01,709 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('2911c6f5155f488d',)
2025-11-29 06:09:01,711 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:09:01] "GET /chat/rooms/2911c6f5155f488d/messages?page=1&pageSize=50 HTTP/1.1" 200 4662 0.069483
(156760) accepted ('211.71.92.185', 29887)
2025-11-29 06:09:42,031 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:09:42,031 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:42,032 INFO sqlalchemy.engine.Engine [cached since 40.33s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:09:42,082 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:42,082 INFO sqlalchemy.engine.Engine [cached since 40.38s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:09:42,083 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:09:42,083 INFO sqlalchemy.engine.Engine [cached since 40.38s ago] ('2911c6f5155f488d',)
2025-11-29 06:09:42,090 INFO sqlalchemy.engine.Engine INSERT INTO shared_files (id, user_id, group_id, filename, file_path, file_type, file_size, mime_type, thumbnail_path, created_at, updated_at, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:09:42,090 INFO sqlalchemy.engine.Engine [generated in 0.00023s] ('043969b648a944b0', '31347787a25a4976', '2911c6f5155f488d', 'upload_1764367782008_Screenshot_2025-11-28-01-45-07-243_com.miui.home.jpg', '20251128220942_upload_1764367782008_Screenshot_2025-11-28-01-45-07-243_com.miui.home.jpg', 'image', 1097179, 'image/jpeg', None, '2025-11-28 22:09:42', '2025-11-28 22:09:42', 0)
2025-11-29 06:09:42,090 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:09:42,094 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:09:42,096 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.id = ?
2025-11-29 06:09:42,096 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('043969b648a944b0',)
2025-11-29 06:09:42,096 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:09:42] "POST /files/upload HTTP/1.1" 201 804 0.066570
(156760) accepted ('211.71.92.185', 29639)
2025-11-29 06:09:43,586 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:09:43,586 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:43,586 INFO sqlalchemy.engine.Engine [cached since 41.89s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:09:43,587 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:43,587 INFO sqlalchemy.engine.Engine [cached since 41.89s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:09:43,588 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:09:43,588 INFO sqlalchemy.engine.Engine [cached since 41.89s ago] ('2911c6f5155f488d',)
2025-11-29 06:09:43,589 INFO sqlalchemy.engine.Engine INSERT INTO group_messages (id, group_id, sender_id, message_type, content, file_url, task_id, reply_to_id, sent_at, updated_time, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:09:43,589 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('b69365a90d7d439b', '2911c6f5155f488d', '31347787a25a4976', 'text', '[图片]', None, None, None, '2025-11-28 22:09:43', 1764367783, 0)
2025-11-29 06:09:43,590 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:09:43,593 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:09:43,594 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.id = ?
2025-11-29 06:09:43,594 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ('b69365a90d7d439b',)
2025-11-29 06:09:43,595 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ?
2025-11-29 06:09:43,595 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('31347787a25a4976',)
2025-11-29 06:09:43,596 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:09:43] "POST /chat/rooms/2911c6f5155f488d/messages HTTP/1.1" 201 454 0.011304
(156760) accepted ('211.71.92.185', 29651)
2025-11-29 06:09:56,080 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:09:56,080 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:56,080 INFO sqlalchemy.engine.Engine [cached since 54.38s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:09:56,862 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:56,863 INFO sqlalchemy.engine.Engine [cached since 55.16s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:09:56,863 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:09:56,863 INFO sqlalchemy.engine.Engine [cached since 55.16s ago] ('2911c6f5155f488d',)
2025-11-29 06:09:56,872 INFO sqlalchemy.engine.Engine INSERT INTO shared_files (id, user_id, group_id, filename, file_path, file_type, file_size, mime_type, thumbnail_path, created_at, updated_at, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:09:56,872 INFO sqlalchemy.engine.Engine [cached since 14.78s ago] ('82050c2ad2d94450', '31347787a25a4976', '2911c6f5155f488d', 'upload_1764367795780_20251126024539_1.mp4', '20251128220956_upload_1764367795780_20251126024539_1.mp4', 'video', 9746004, 'video/mp4', None, '2025-11-28 22:09:56', '2025-11-28 22:09:56', 0)
2025-11-29 06:09:56,872 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:09:56,876 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:09:56,876 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.id = ?
2025-11-29 06:09:56,876 INFO sqlalchemy.engine.Engine [cached since 14.78s ago] ('82050c2ad2d94450',)
2025-11-29 06:09:56,877 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:09:56] "POST /files/upload HTTP/1.1" 201 739 0.799775
(156760) accepted ('211.71.92.185', 29653)
2025-11-29 06:09:59,102 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:09:59,102 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:59,102 INFO sqlalchemy.engine.Engine [cached since 57.4s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:09:59,103 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:09:59,103 INFO sqlalchemy.engine.Engine [cached since 57.4s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:09:59,104 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:09:59,104 INFO sqlalchemy.engine.Engine [cached since 57.4s ago] ('2911c6f5155f488d',)
2025-11-29 06:09:59,104 INFO sqlalchemy.engine.Engine INSERT INTO group_messages (id, group_id, sender_id, message_type, content, file_url, task_id, reply_to_id, sent_at, updated_time, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:09:59,104 INFO sqlalchemy.engine.Engine [cached since 15.52s ago] ('9c32002c558e4140', '2911c6f5155f488d', '31347787a25a4976', 'text', '[视频]', None, None, None, '2025-11-28 22:09:59', 1764367799, 0)
2025-11-29 06:09:59,105 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:09:59,109 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:09:59,109 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.id = ?
2025-11-29 06:09:59,110 INFO sqlalchemy.engine.Engine [cached since 15.52s ago] ('9c32002c558e4140',)
2025-11-29 06:09:59,110 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ?
2025-11-29 06:09:59,110 INFO sqlalchemy.engine.Engine [cached since 15.51s ago] ('31347787a25a4976',)
2025-11-29 06:09:59,111 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:09:59] "POST /chat/rooms/2911c6f5155f488d/messages HTTP/1.1" 201 454 0.009828
(156760) accepted ('211.71.92.185', 29667)
2025-11-29 06:10:15,691 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:10:15,691 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:10:15,692 INFO sqlalchemy.engine.Engine [cached since 73.99s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:10:15,796 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:10:15,796 INFO sqlalchemy.engine.Engine [cached since 74.1s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:10:15,797 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:10:15,797 INFO sqlalchemy.engine.Engine [cached since 74.09s ago] ('2911c6f5155f488d',)
2025-11-29 06:10:15,799 INFO sqlalchemy.engine.Engine INSERT INTO shared_files (id, user_id, group_id, filename, file_path, file_type, file_size, mime_type, thumbnail_path, created_at, updated_at, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:10:15,799 INFO sqlalchemy.engine.Engine [cached since 33.71s ago] ('8303f74cd6454332', '31347787a25a4976', '2911c6f5155f488d', 'upload_1764367815667_Screenshot_2025-11-28-01-43-44-269_com.miui.home.jpg', '20251128221015_upload_1764367815667_Screenshot_2025-11-28-01-43-44-269_com.miui.home.jpg', 'image', 1177182, 'image/jpeg', None, '2025-11-28 22:10:15', '2025-11-28 22:10:15', 0)
2025-11-29 06:10:15,799 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:10:15,803 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:10:15,804 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.id = ?
2025-11-29 06:10:15,804 INFO sqlalchemy.engine.Engine [cached since 33.71s ago] ('8303f74cd6454332',)
2025-11-29 06:10:15,804 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:10:15] "POST /files/upload HTTP/1.1" 201 804 0.114812
(156760) accepted ('211.71.92.185', 29669)
2025-11-29 06:10:19,285 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:10:19,286 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:10:19,286 INFO sqlalchemy.engine.Engine [cached since 77.59s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:10:19,286 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:10:19,286 INFO sqlalchemy.engine.Engine [cached since 77.59s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:10:19,287 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:10:19,287 INFO sqlalchemy.engine.Engine [cached since 77.59s ago] ('2911c6f5155f488d',)
2025-11-29 06:10:19,288 INFO sqlalchemy.engine.Engine INSERT INTO group_messages (id, group_id, sender_id, message_type, content, file_url, task_id, reply_to_id, sent_at, updated_time, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:10:19,288 INFO sqlalchemy.engine.Engine [cached since 35.7s ago] ('a1bbc525ee904154', '2911c6f5155f488d', '31347787a25a4976', 'text', '1qqqq', None, None, None, '2025-11-28 22:10:19', 1764367819, 0)
2025-11-29 06:10:19,288 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:10:19,295 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:10:19,296 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.id = ?
2025-11-29 06:10:19,296 INFO sqlalchemy.engine.Engine [cached since 35.7s ago] ('a1bbc525ee904154',)
2025-11-29 06:10:19,296 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ?
2025-11-29 06:10:19,296 INFO sqlalchemy.engine.Engine [cached since 35.7s ago] ('31347787a25a4976',)
2025-11-29 06:10:19,297 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:10:19] "POST /chat/rooms/2911c6f5155f488d/messages HTTP/1.1" 201 445 0.012568
(156760) accepted ('211.71.92.185', 29671)
2025-11-29 06:10:22,865 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:10:22,866 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:10:22,866 INFO sqlalchemy.engine.Engine [cached since 81.17s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:10:22,866 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:10:22,866 INFO sqlalchemy.engine.Engine [cached since 81.17s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:10:22,867 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:10:22,867 INFO sqlalchemy.engine.Engine [cached since 81.17s ago] ('2911c6f5155f488d',)
2025-11-29 06:10:22,868 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.group_id = ? AND shared_files.is_deleted = 0 ORDER BY shared_files.created_at DESC
2025-11-29 06:10:22,868 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('2911c6f5155f488d',)
2025-11-29 06:10:22,869 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:10:22] "GET /files/group/2911c6f5155f488d HTTP/1.1" 200 1888 0.005025
(156760) accepted ('211.71.92.185', 29678)
2025-11-29 06:10:45,701 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:10:45,701 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:10:45,701 INFO sqlalchemy.engine.Engine [cached since 104s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:10:45,702 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:10:45,702 INFO sqlalchemy.engine.Engine [cached since 104s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:10:45,702 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:10:45,702 INFO sqlalchemy.engine.Engine [cached since 104s ago] ('2911c6f5155f488d',)
2025-11-29 06:10:45,703 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.group_id = ? AND shared_files.is_deleted = 0 ORDER BY shared_files.created_at DESC
2025-11-29 06:10:45,703 INFO sqlalchemy.engine.Engine [cached since 22.83s ago] ('2911c6f5155f488d',)
2025-11-29 06:10:45,704 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:10:45] "GET /files/group/2911c6f5155f488d HTTP/1.1" 200 1888 0.003925
 * Detected change in '/root/ToDoListServer/app.py', reloading
 * Restarting with stat
[2025-11-29 06:12:27,729] INFO in logger: 日志系统初始化完成
[2025-11-29 06:12:27] INFO in logger: 日志系统初始化完成
[2025-11-29 06:12:27,737] INFO in app: 数据库迁移系统已启用
[2025-11-29 06:12:27] INFO in app: 数据库迁移系统已启用
[2025-11-29 06:12:27,738] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:12:27] WARNING in app: Flask-Limiter未安装，API限流功能不可用
[2025-11-29 06:12:27,876] INFO in app: 所有蓝图已注册
[2025-11-29 06:12:27] INFO in app: 所有蓝图已注册
2025-11-29 06:12:27,877 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:12:27,877 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2025-11-29 06:12:27,877 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,878 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("oauth_accounts")
2025-11-29 06:12:27,878 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,878 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_groups")
2025-11-29 06:12:27,878 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,878 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("project_groups")
2025-11-29 06:12:27,878 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,879 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("group_messages")
2025-11-29 06:12:27,879 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,879 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("message_read_status")
2025-11-29 06:12:27,879 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,880 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-11-29 06:12:27,880 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,880 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_files")
2025-11-29 06:12:27,880 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,880 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("shared_files")
2025-11-29 06:12:27,881 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,881 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("calendar_events")
2025-11-29 06:12:27,881 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-11-29 06:12:27,881 INFO sqlalchemy.engine.Engine COMMIT
[2025-11-29 06:12:27,881] INFO in app: 数据库表检查完成
[2025-11-29 06:12:27] INFO in app: 数据库表检查完成
[2025-11-29 06:12:27,881] INFO in app: 应用初始化完成
[2025-11-29 06:12:27] INFO in app: 应用初始化完成
 * Debugger is active!
 * Debugger PIN: 199-467-290
(159977) wsgi starting up on http://0.0.0.0:5000
(159977) accepted ('211.71.92.185', 29829)
ToDoList服务器启动中...
监听地址: http://0.0.0.0:5000
可用接口:
- GET / - 服务信息
- GET /health - 健康检查
- POST /auth/register - 用户注册
- POST /auth/login - 用户登录
- POST /auth/logout - 用户登出
- GET /auth/status - 认证服务状态
- POST /groups/create - 创建项目组
- POST /groups/join - 加入项目组
- POST /groups/join-by-code - 通过邀请码加入项目组
- GET /groups/list/<user_id> - 获取用户项目组列表
- GET /groups/info/<group_id> - 获取项目组信息
- PUT /groups/update/<group_id> - 更新项目组信息
- DELETE /groups/delete/<group_id> - 删除项目组
- GET /chat/rooms - 获取聊天室列表
- GET /chat/rooms/<room_id>/messages - 获取聊天消息
- POST /chat/rooms/<room_id>/messages - 发送聊天消息
- WebSocket: subscribe/unsubscribe - 实时聊天功能
2025-11-29 06:17:46,885 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:17:46,888 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:17:46,888 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:17:46,890 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:17:46,890 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:17:46,891 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:17:46,891 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('2911c6f5155f488d',)
2025-11-29 06:17:46,893 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0 ORDER BY group_messages.sent_at DESC
 LIMIT ? OFFSET ?
2025-11-29 06:17:46,893 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('2911c6f5155f488d', 20, 0)
2025-11-29 06:17:46,897 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0) AS anon_1
2025-11-29 06:17:46,897 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('2911c6f5155f488d',)
2025-11-29 06:17:46,899 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:17:46] "GET /chat/rooms/2911c6f5155f488d/messages?page=1&pageSize=50 HTTP/1.1" 200 5532 0.058002
(159977) accepted ('211.71.92.185', 29832)
2025-11-29 06:17:54,018 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:17:54,018 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:17:54,018 INFO sqlalchemy.engine.Engine [cached since 7.131s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:17:54,060 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:17:54,060 INFO sqlalchemy.engine.Engine [cached since 7.171s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:17:54,061 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:17:54,061 INFO sqlalchemy.engine.Engine [cached since 7.17s ago] ('2911c6f5155f488d',)
2025-11-29 06:17:54,068 INFO sqlalchemy.engine.Engine INSERT INTO shared_files (id, user_id, group_id, filename, file_path, file_type, file_size, mime_type, thumbnail_path, created_at, updated_at, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:17:54,068 INFO sqlalchemy.engine.Engine [generated in 0.00024s] ('c8dd42f383254306', '31347787a25a4976', '2911c6f5155f488d', 'upload_1764368273999_Screenshot_2025-11-28-01-45-07-243_com.miui.home.jpg', '20251128221754_upload_1764368273999_Screenshot_2025-11-28-01-45-07-243_com.miui.home.jpg', 'image', 1097179, 'image/jpeg', None, '2025-11-28 22:17:54', '2025-11-28 22:17:54', 0)
2025-11-29 06:17:54,068 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:17:54,072 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:17:54,073 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.id = ?
2025-11-29 06:17:54,073 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('c8dd42f383254306',)
2025-11-29 06:17:54,074 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:17:54] "POST /files/upload HTTP/1.1" 201 804 0.057407
(159977) accepted ('211.71.92.185', 29833)
2025-11-29 06:17:55,303 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:17:55,303 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:17:55,303 INFO sqlalchemy.engine.Engine [cached since 8.416s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:17:55,304 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:17:55,304 INFO sqlalchemy.engine.Engine [cached since 8.415s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:17:55,305 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:17:55,305 INFO sqlalchemy.engine.Engine [cached since 8.414s ago] ('2911c6f5155f488d',)
2025-11-29 06:17:55,306 INFO sqlalchemy.engine.Engine INSERT INTO group_messages (id, group_id, sender_id, message_type, content, file_url, task_id, reply_to_id, sent_at, updated_time, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:17:55,306 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('13cb87442e774208', '2911c6f5155f488d', '31347787a25a4976', 'text', '[图片]', None, None, None, '2025-11-28 22:17:55', 1764368275, 0)
2025-11-29 06:17:55,307 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:17:55,310 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:17:55,310 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.id = ?
2025-11-29 06:17:55,310 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('13cb87442e774208',)
2025-11-29 06:17:55,311 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ?
2025-11-29 06:17:55,311 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ('31347787a25a4976',)
2025-11-29 06:17:55,312 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:17:55] "POST /chat/rooms/2911c6f5155f488d/messages HTTP/1.1" 201 454 0.010242
(159977) accepted ('211.71.92.185', 29835)
2025-11-29 06:18:10,756 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:18:10,756 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:18:10,757 INFO sqlalchemy.engine.Engine [cached since 23.87s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:18:10,804 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:18:10,804 INFO sqlalchemy.engine.Engine [cached since 23.91s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:18:10,805 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:18:10,805 INFO sqlalchemy.engine.Engine [cached since 23.91s ago] ('2911c6f5155f488d',)
2025-11-29 06:18:10,806 INFO sqlalchemy.engine.Engine INSERT INTO shared_files (id, user_id, group_id, filename, file_path, file_type, file_size, mime_type, thumbnail_path, created_at, updated_at, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:18:10,807 INFO sqlalchemy.engine.Engine [cached since 16.74s ago] ('76d81ea143ab4ef6', '31347787a25a4976', '2911c6f5155f488d', 'upload_1764368290715_Screenshot_2025-11-28-01-43-44-269_com.miui.home.jpg', '20251128221810_upload_1764368290715_Screenshot_2025-11-28-01-43-44-269_com.miui.home.jpg', 'image', 1177182, 'image/jpeg', None, '2025-11-28 22:18:10', '2025-11-28 22:18:10', 0)
2025-11-29 06:18:10,807 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:18:10,810 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:18:10,810 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.id = ?
2025-11-29 06:18:10,811 INFO sqlalchemy.engine.Engine [cached since 16.74s ago] ('76d81ea143ab4ef6',)
2025-11-29 06:18:10,811 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:18:10] "POST /files/upload HTTP/1.1" 201 804 0.057235
(159977) accepted ('211.71.92.185', 29836)
2025-11-29 06:18:13,957 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:18:13,957 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:18:13,957 INFO sqlalchemy.engine.Engine [cached since 27.07s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:18:13,958 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:18:13,958 INFO sqlalchemy.engine.Engine [cached since 27.07s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:18:13,959 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:18:13,959 INFO sqlalchemy.engine.Engine [cached since 27.07s ago] ('2911c6f5155f488d',)
2025-11-29 06:18:13,959 INFO sqlalchemy.engine.Engine INSERT INTO group_messages (id, group_id, sender_id, message_type, content, file_url, task_id, reply_to_id, sent_at, updated_time, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:18:13,960 INFO sqlalchemy.engine.Engine [cached since 18.65s ago] ('c955e58ce3114674', '2911c6f5155f488d', '31347787a25a4976', 'text', '[图片]', None, None, None, '2025-11-28 22:18:13', 1764368293, 0)
2025-11-29 06:18:13,960 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:18:13,963 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:18:13,964 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.id = ?
2025-11-29 06:18:13,964 INFO sqlalchemy.engine.Engine [cached since 18.65s ago] ('c955e58ce3114674',)
2025-11-29 06:18:13,964 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ?
2025-11-29 06:18:13,964 INFO sqlalchemy.engine.Engine [cached since 18.65s ago] ('31347787a25a4976',)
2025-11-29 06:18:13,965 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:18:13] "POST /chat/rooms/2911c6f5155f488d/messages HTTP/1.1" 201 454 0.009370
(159977) accepted ('211.71.92.185', 29844)
2025-11-29 06:19:00,574 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:19:00,574 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:19:00,574 INFO sqlalchemy.engine.Engine [cached since 73.69s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:19:00,574 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:19:00,575 INFO sqlalchemy.engine.Engine [cached since 73.68s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:19:00,575 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:19:00,575 INFO sqlalchemy.engine.Engine [cached since 73.68s ago] ('2911c6f5155f488d',)
2025-11-29 06:19:00,576 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.group_id = ? AND shared_files.is_deleted = 0 ORDER BY shared_files.created_at DESC
2025-11-29 06:19:00,576 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('2911c6f5155f488d',)
2025-11-29 06:19:00,577 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:19:00] "GET /files/group/2911c6f5155f488d HTTP/1.1" 200 3002 0.004815
(159977) accepted ('211.71.92.185', 29847)
2025-11-29 06:19:07,571 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:19:07,572 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:19:07,572 INFO sqlalchemy.engine.Engine [cached since 80.68s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:19:07,572 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:19:07,572 INFO sqlalchemy.engine.Engine [cached since 80.68s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:19:07,573 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:19:07,573 INFO sqlalchemy.engine.Engine [cached since 80.68s ago] ('2911c6f5155f488d',)
2025-11-29 06:19:07,574 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.group_id = ? AND shared_files.is_deleted = 0 ORDER BY shared_files.created_at DESC
2025-11-29 06:19:07,574 INFO sqlalchemy.engine.Engine [cached since 6.998s ago] ('2911c6f5155f488d',)
2025-11-29 06:19:07,575 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:19:07] "GET /files/group/2911c6f5155f488d HTTP/1.1" 200 3002 0.004402
(159977) accepted ('211.71.92.185', 29850)
2025-11-29 06:19:10,636 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:19:10,636 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:19:10,637 INFO sqlalchemy.engine.Engine [cached since 83.75s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:19:10,637 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:19:10,637 INFO sqlalchemy.engine.Engine [cached since 83.75s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:19:10,638 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:19:10,638 INFO sqlalchemy.engine.Engine [cached since 83.75s ago] ('2911c6f5155f488d',)
2025-11-29 06:19:10,638 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0 ORDER BY group_messages.sent_at DESC
 LIMIT ? OFFSET ?
2025-11-29 06:19:10,638 INFO sqlalchemy.engine.Engine [cached since 83.75s ago] ('2911c6f5155f488d', 20, 0)
2025-11-29 06:19:10,639 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0) AS anon_1
2025-11-29 06:19:10,639 INFO sqlalchemy.engine.Engine [cached since 83.74s ago] ('2911c6f5155f488d',)
2025-11-29 06:19:10,641 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:19:10] "GET /chat/rooms/2911c6f5155f488d/messages?page=1&pageSize=50 HTTP/1.1" 200 6118 0.005809
(159977) accepted ('211.71.92.185', 29851)
2025-11-29 06:19:12,515 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:19:12,515 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:19:12,515 INFO sqlalchemy.engine.Engine [cached since 85.63s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:19:12,516 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:19:12,516 INFO sqlalchemy.engine.Engine [cached since 85.63s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:19:12,517 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:19:12,517 INFO sqlalchemy.engine.Engine [cached since 85.63s ago] ('2911c6f5155f488d',)
2025-11-29 06:19:12,517 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.group_id = ? AND shared_files.is_deleted = 0 ORDER BY shared_files.created_at DESC
2025-11-29 06:19:12,517 INFO sqlalchemy.engine.Engine [cached since 11.94s ago] ('2911c6f5155f488d',)
2025-11-29 06:19:12,518 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:19:12] "GET /files/group/2911c6f5155f488d HTTP/1.1" 200 3002 0.003888
(159977) accepted ('211.71.92.185', 29675)
2025-11-29 06:22:49,942 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:22:49,943 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:22:49,943 INFO sqlalchemy.engine.Engine [cached since 303.1s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:22:49,943 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:22:49,943 INFO sqlalchemy.engine.Engine [cached since 303.1s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:22:49,944 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:22:49,944 INFO sqlalchemy.engine.Engine [cached since 303.1s ago] ('2911c6f5155f488d',)
2025-11-29 06:22:49,945 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0 ORDER BY group_messages.sent_at DESC
 LIMIT ? OFFSET ?
2025-11-29 06:22:49,945 INFO sqlalchemy.engine.Engine [cached since 303.1s ago] ('2911c6f5155f488d', 20, 0)
2025-11-29 06:22:49,945 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.group_id = ? AND group_messages.is_deleted = 0) AS anon_1
2025-11-29 06:22:49,945 INFO sqlalchemy.engine.Engine [cached since 303s ago] ('2911c6f5155f488d',)
2025-11-29 06:22:49,947 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:22:49] "GET /chat/rooms/2911c6f5155f488d/messages?page=1&pageSize=50 HTTP/1.1" 200 6118 0.005819
(159977) accepted ('211.71.92.185', 29676)
2025-11-29 06:22:54,884 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:22:54,884 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:22:54,884 INFO sqlalchemy.engine.Engine [cached since 308s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:22:54,925 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:22:54,925 INFO sqlalchemy.engine.Engine [cached since 308s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:22:54,926 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:22:54,926 INFO sqlalchemy.engine.Engine [cached since 308s ago] ('2911c6f5155f488d',)
2025-11-29 06:22:54,928 INFO sqlalchemy.engine.Engine INSERT INTO shared_files (id, user_id, group_id, filename, file_path, file_type, file_size, mime_type, thumbnail_path, created_at, updated_at, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:22:54,928 INFO sqlalchemy.engine.Engine [cached since 300.9s ago] ('691e20a5ca9e47cc', '31347787a25a4976', '2911c6f5155f488d', 'upload_1764368574872_Screenshot_2025-11-28-01-45-07-243_com.miui.home.jpg', '20251128222254_upload_1764368574872_Screenshot_2025-11-28-01-45-07-243_com.miui.home.jpg', 'image', 1097179, 'image/jpeg', None, '2025-11-28 22:22:54', '2025-11-28 22:22:54', 0)
2025-11-29 06:22:54,928 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:22:54,932 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:22:54,932 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.id = ?
2025-11-29 06:22:54,932 INFO sqlalchemy.engine.Engine [cached since 300.9s ago] ('691e20a5ca9e47cc',)
2025-11-29 06:22:54,933 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:22:54] "POST /files/upload HTTP/1.1" 201 804 0.049847
(159977) accepted ('211.71.92.185', 29677)
2025-11-29 06:22:56,093 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:22:56,093 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:22:56,093 INFO sqlalchemy.engine.Engine [cached since 309.2s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:22:56,094 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:22:56,094 INFO sqlalchemy.engine.Engine [cached since 309.2s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:22:56,094 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:22:56,094 INFO sqlalchemy.engine.Engine [cached since 309.2s ago] ('2911c6f5155f488d',)
2025-11-29 06:22:56,095 INFO sqlalchemy.engine.Engine INSERT INTO group_messages (id, group_id, sender_id, message_type, content, file_url, task_id, reply_to_id, sent_at, updated_time, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:22:56,095 INFO sqlalchemy.engine.Engine [cached since 300.8s ago] ('dff901998aeb4b47', '2911c6f5155f488d', '31347787a25a4976', 'text', '[图片]', None, None, None, '2025-11-28 22:22:56', 1764368576, 0)
2025-11-29 06:22:56,095 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:22:56,099 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:22:56,099 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.id = ?
2025-11-29 06:22:56,099 INFO sqlalchemy.engine.Engine [cached since 300.8s ago] ('dff901998aeb4b47',)
2025-11-29 06:22:56,099 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ?
2025-11-29 06:22:56,099 INFO sqlalchemy.engine.Engine [cached since 300.8s ago] ('31347787a25a4976',)
2025-11-29 06:22:56,100 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:22:56] "POST /chat/rooms/2911c6f5155f488d/messages HTTP/1.1" 201 454 0.008526
(159977) accepted ('211.71.92.185', 29678)
211.71.92.185 - - [29/Nov/2025 06:22:56] "GET /files/691e20a5ca9e47cc/preview HTTP/1.1" 401 264 0.000956
(159977) accepted ('211.71.92.185', 29679)
2025-11-29 06:23:04,245 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:23:04,246 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:23:04,246 INFO sqlalchemy.engine.Engine [cached since 317.4s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:23:04,322 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:23:04,322 INFO sqlalchemy.engine.Engine [cached since 317.4s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:23:04,322 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:23:04,323 INFO sqlalchemy.engine.Engine [cached since 317.4s ago] ('2911c6f5155f488d',)
2025-11-29 06:23:04,324 INFO sqlalchemy.engine.Engine INSERT INTO shared_files (id, user_id, group_id, filename, file_path, file_type, file_size, mime_type, thumbnail_path, created_at, updated_at, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:23:04,324 INFO sqlalchemy.engine.Engine [cached since 310.3s ago] ('81c7a9aa59a746a6', '31347787a25a4976', '2911c6f5155f488d', 'upload_1764368584194_Screenshot_2025-11-27-14-15-57-150_com.tencent.tmgp.sgame.jpg', '20251128222304_upload_1764368584194_Screenshot_2025-11-27-14-15-57-150_com.tencent.tmgp.sgame.jpg', 'image', 1241699, 'image/jpeg', None, '2025-11-28 22:23:04', '2025-11-28 22:23:04', 0)
2025-11-29 06:23:04,325 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:23:04,329 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:23:04,329 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.id = ?
2025-11-29 06:23:04,329 INFO sqlalchemy.engine.Engine [cached since 310.3s ago] ('81c7a9aa59a746a6',)
2025-11-29 06:23:04,330 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:23:04] "POST /files/upload HTTP/1.1" 201 822 0.085403
(159977) accepted ('211.71.92.185', 29680)
2025-11-29 06:23:05,483 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:23:05,483 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:23:05,483 INFO sqlalchemy.engine.Engine [cached since 318.6s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:23:05,484 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:23:05,484 INFO sqlalchemy.engine.Engine [cached since 318.6s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:23:05,484 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:23:05,484 INFO sqlalchemy.engine.Engine [cached since 318.6s ago] ('2911c6f5155f488d',)
2025-11-29 06:23:05,485 INFO sqlalchemy.engine.Engine INSERT INTO group_messages (id, group_id, sender_id, message_type, content, file_url, task_id, reply_to_id, sent_at, updated_time, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:23:05,485 INFO sqlalchemy.engine.Engine [cached since 310.2s ago] ('014d3ccc32674537', '2911c6f5155f488d', '31347787a25a4976', 'text', '[图片]', None, None, None, '2025-11-28 22:23:05', 1764368585, 0)
2025-11-29 06:23:05,485 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:23:05,489 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:23:05,489 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.id = ?
2025-11-29 06:23:05,489 INFO sqlalchemy.engine.Engine [cached since 310.2s ago] ('014d3ccc32674537',)
2025-11-29 06:23:05,489 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ?
2025-11-29 06:23:05,489 INFO sqlalchemy.engine.Engine [cached since 310.2s ago] ('31347787a25a4976',)
2025-11-29 06:23:05,490 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:23:05] "POST /chat/rooms/2911c6f5155f488d/messages HTTP/1.1" 201 454 0.008564
(159977) accepted ('211.71.92.185', 29681)
211.71.92.185 - - [29/Nov/2025 06:23:05] "GET /files/81c7a9aa59a746a6/preview HTTP/1.1" 401 265 0.000655
(159977) accepted ('211.71.92.185', 29684)
2025-11-29 06:23:23,228 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:23:23,229 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:23:23,229 INFO sqlalchemy.engine.Engine [cached since 336.3s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:23:23,230 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:23:23,230 INFO sqlalchemy.engine.Engine [cached since 336.3s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:23:23,230 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:23:23,230 INFO sqlalchemy.engine.Engine [cached since 336.3s ago] ('2911c6f5155f488d',)
2025-11-29 06:23:23,231 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.group_id = ? AND shared_files.is_deleted = 0 ORDER BY shared_files.created_at DESC
2025-11-29 06:23:23,231 INFO sqlalchemy.engine.Engine [cached since 262.7s ago] ('2911c6f5155f488d',)
2025-11-29 06:23:23,232 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:23:23] "GET /files/group/2911c6f5155f488d HTTP/1.1" 200 4134 0.004199
(159977) accepted ('211.71.92.185', 29750)
(159977) accepted ('211.71.92.185', 29749)
211.71.92.185 - - [29/Nov/2025 06:25:06] "GET /files/81c7a9aa59a746a6/preview HTTP/1.1" 401 265 0.000869
211.71.92.185 - - [29/Nov/2025 06:25:06] "GET /files/691e20a5ca9e47cc/preview HTTP/1.1" 401 265 0.000589
(159977) accepted ('211.71.92.185', 29751)
2025-11-29 06:25:14,123 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:25:14,123 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:25:14,123 INFO sqlalchemy.engine.Engine [cached since 447.2s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:25:14,340 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:25:14,340 INFO sqlalchemy.engine.Engine [cached since 447.5s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:25:14,341 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:25:14,341 INFO sqlalchemy.engine.Engine [cached since 447.4s ago] ('2911c6f5155f488d',)
2025-11-29 06:25:14,344 INFO sqlalchemy.engine.Engine INSERT INTO shared_files (id, user_id, group_id, filename, file_path, file_type, file_size, mime_type, thumbnail_path, created_at, updated_at, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:25:14,344 INFO sqlalchemy.engine.Engine [cached since 440.3s ago] ('dc9813216b46400b', '31347787a25a4976', '2911c6f5155f488d', 'upload_1764368714024_IMG_20251127_214343.jpg', '20251128222514_upload_1764368714024_IMG_20251127_214343.jpg', 'image', 3727992, 'image/jpeg', None, '2025-11-28 22:25:14', '2025-11-28 22:25:14', 0)
2025-11-29 06:25:14,345 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:25:14,348 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:25:14,348 INFO sqlalchemy.engine.Engine SELECT shared_files.id AS shared_files_id, shared_files.user_id AS shared_files_user_id, shared_files.group_id AS shared_files_group_id, shared_files.filename AS shared_files_filename, shared_files.file_path AS shared_files_file_path, shared_files.file_type AS shared_files_file_type, shared_files.file_size AS shared_files_file_size, shared_files.mime_type AS shared_files_mime_type, shared_files.thumbnail_path AS shared_files_thumbnail_path, shared_files.created_at AS shared_files_created_at, shared_files.updated_at AS shared_files_updated_at, shared_files.is_deleted AS shared_files_is_deleted 
FROM shared_files 
WHERE shared_files.id = ?
2025-11-29 06:25:14,348 INFO sqlalchemy.engine.Engine [cached since 440.3s ago] ('dc9813216b46400b',)
2025-11-29 06:25:14,349 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:25:14] "POST /files/upload HTTP/1.1" 201 746 0.227179
(159977) accepted ('211.71.92.185', 29753)
2025-11-29 06:25:17,606 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:25:17,606 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ? OR users.username = ? OR users.email = ?
 LIMIT ? OFFSET ?
2025-11-29 06:25:17,606 INFO sqlalchemy.engine.Engine [cached since 450.7s ago] ('31347787a25a4976', '31347787a25a4976', '31347787a25a4976', 1, 0)
2025-11-29 06:25:17,607 INFO sqlalchemy.engine.Engine SELECT project_groups.id AS project_groups_id, project_groups.name AS project_groups_name, project_groups.project_title AS project_groups_project_title, project_groups.description AS project_groups_description, project_groups.leader_id AS project_groups_leader_id, project_groups.start_date AS project_groups_start_date, project_groups.due_date AS project_groups_due_date, project_groups.is_active AS project_groups_is_active, project_groups.contact_info AS project_groups_contact_info, project_groups.invite_code AS project_groups_invite_code 
FROM project_groups 
WHERE project_groups.id = ?
 LIMIT ? OFFSET ?
2025-11-29 06:25:17,607 INFO sqlalchemy.engine.Engine [cached since 450.7s ago] ('2911c6f5155f488d', 1, 0)
2025-11-29 06:25:17,608 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users, user_groups 
WHERE ? = user_groups.group_id AND users.id = user_groups.user_id
2025-11-29 06:25:17,608 INFO sqlalchemy.engine.Engine [cached since 450.7s ago] ('2911c6f5155f488d',)
2025-11-29 06:25:17,608 INFO sqlalchemy.engine.Engine INSERT INTO group_messages (id, group_id, sender_id, message_type, content, file_url, task_id, reply_to_id, sent_at, updated_time, is_deleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-29 06:25:17,608 INFO sqlalchemy.engine.Engine [cached since 442.3s ago] ('a15634f7554b4609', '2911c6f5155f488d', '31347787a25a4976', 'text', '[图片]', None, None, None, '2025-11-28 22:25:17', 1764368717, 0)
2025-11-29 06:25:17,609 INFO sqlalchemy.engine.Engine COMMIT
2025-11-29 06:25:17,613 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-11-29 06:25:17,613 INFO sqlalchemy.engine.Engine SELECT group_messages.id AS group_messages_id, group_messages.group_id AS group_messages_group_id, group_messages.sender_id AS group_messages_sender_id, group_messages.message_type AS group_messages_message_type, group_messages.content AS group_messages_content, group_messages.file_url AS group_messages_file_url, group_messages.task_id AS group_messages_task_id, group_messages.reply_to_id AS group_messages_reply_to_id, group_messages.sent_at AS group_messages_sent_at, group_messages.updated_time AS group_messages_updated_time, group_messages.is_deleted AS group_messages_is_deleted 
FROM group_messages 
WHERE group_messages.id = ?
2025-11-29 06:25:17,613 INFO sqlalchemy.engine.Engine [cached since 442.3s ago] ('a15634f7554b4609',)
2025-11-29 06:25:17,614 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.is_active AS users_is_active 
FROM users 
WHERE users.id = ?
2025-11-29 06:25:17,614 INFO sqlalchemy.engine.Engine [cached since 442.3s ago] ('31347787a25a4976',)
2025-11-29 06:25:17,614 INFO sqlalchemy.engine.Engine ROLLBACK
211.71.92.185 - - [29/Nov/2025 06:25:17] "POST /chat/rooms/2911c6f5155f488d/messages HTTP/1.1" 201 454 0.009235
(159977) accepted ('211.71.92.185', 29754)
211.71.92.185 - - [29/Nov/2025 06:25:17] "GET /files/81c7a9aa59a746a6/preview HTTP/1.1" 401 265 0.000714
(159977) accepted ('211.71.92.185', 29755)
211.71.92.185 - - [29/Nov/2025 06:25:17] "GET /files/dc9813216b46400b/preview HTTP/1.1" 401 265 0.000520
(159977) accepted ('204.76.203.51', 41550)
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/eventlet/wsgi.py", line 631, in handle_one_response
    write(b''.join(towrite))
  File "/usr/local/lib/python3.11/site-packages/eventlet/wsgi.py", line 563, in write
    wfile.flush()
  File "/usr/lib64/python3.11/socket.py", line 736, in write
    return self._sock.send(b)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/eventlet/greenio/base.py", line 383, in send
    return self._send_loop(self.fd.send, data, flags)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/eventlet/greenio/base.py", line 370, in _send_loop
    return send_method(data, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^
ConnectionResetError: [Errno 104] Connection reset by peer

204.76.203.51 - - [29/Nov/2025 06:28:25] "GET http://azenv.net/ HTTP/1.1" 404 0 0.004819
(159977) accepted ('204.76.203.51', 41488)
204.76.203.51 - - [29/Nov/2025 06:28:27] "CONNECT dnspod.qcloud.com:443 HTTP/1.1" 404 372 0.001117
